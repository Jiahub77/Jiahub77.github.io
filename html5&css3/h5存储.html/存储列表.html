<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/2.1.3/jquery.min.js"></script>
</head>
<style>
    .box {
        width: 224px;
        display: flex;
        justify-content: space-between;
        margin: 12px;
    }

    .item {
        width: 224px;
        box-shadow: 0 0 5px 1px #ccc;
        border-radius: 6px;
    }

    .child {
        display: flex;
        justify-content: space-between;
        text-align: center;
    }

    .child p {
        width: 100px;
        height: 24px;
        margin: 0;
    }
</style>

<body>
    <div  class="box">key: <input class="key" type="text"></div>
    <div  class="box">value: <input class="value" type="text"></div>
    <div class="box"><button class="add">ADD</button> <button class="clear">Clear</button></div>
    <div class="item">
    </div>
    <p>这里有 <em>0</em> items</p>
</body>
<script>
    /*
    分别创建两个input元素用来指定storage的Key与Value

Key与Value都不能为空，或连续的空格

每次添加数据，右边的tabel都会更新动态显式当前所有的 key 与其对应的 value 值

页面存在一个用来展示当前storage中存储了多少条键值对的count组件
*/
    var arr = JSON.parse(localStorage.getItem('key')) || []

    $('.add').click(() => {
        var obj = { key: $('.key').val(), value: $('.value').val() }
        arr.push(obj)
        localStorage.setItem('key', JSON.stringify(arr))
        getKey()
    })

    $('.clear').click(() => {
        localStorage.removeItem('key')
        $(".item").html(`<div class="child"><p>key</p><p>value</p></div>`)
        $('em').text('0')
        arr =[]
    })

    function getKey() {
        if (arr == '') {
            $(".item").html(`<div class="child"><p>key</p><p>value</p></div>`)
            $('em').text(arr.length)

        } else {
            $(".item").html('')
            var itemChild = `<div class="child"><p>key</p><p>value</p></div>`
            arr.forEach(element => {
                itemChild = itemChild + `<div class="child"><p>${element.key}</p><p>${element.value}</p></div>`
                $(".item").html(itemChild)
            });
            $('em').text(arr.length)
        }
    }
    getKey()


</script>

</html>