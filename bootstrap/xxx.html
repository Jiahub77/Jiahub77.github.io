<!doctype html>
<html lang="zh-CN">

<head>
    <!-- 必须的 meta 标签 -->
    <meta charset="utf-8">
    <!-- 宽度等于视口宽度，不允许缩放和拉伸 -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1,user-scalable=no">

    <!-- Bootstrap 的 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <title>Swiper!</title>
</head>
<style>
    .box {
        height: 600px;
        overflow: auto;
        position: relative;
        /* 相对定位以便放大时使用 */
    }

    .box::-webkit-scrollbar {
        display: none;
        /* Chrome, Safari 和 Opera */
    }

    .box {
        -ms-overflow-style: none;
        /* IE 和 Edge */
        scrollbar-width: none;
        /* Firefox */
    }

    .item {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        position: absolute;
        /* 绝对定位以覆盖整个box */
        transition: transform 1s ease;
        /* 平滑过渡效果 */
        width: 100%;
    }

    .item1 {
        background-color: yellowgreen;
    }

    .item2 {
        background-color: palevioletred;
    }

    .item3 {
        background-color: skyblue;
    }
</style>
</head>

<body>

    <div class="item3" style="height: 600px;">Top</div>

    <div class="box">
        <div class="item item1">Item 1</div>
        <div class="item item2">Item 2</div>
        <div class="item item3">Item 3</div>
    </div>

    <div class="item2" style="height: 600px;">buttom</div>

    <script>
        var box = document.querySelector('.box');
        var items = document.querySelectorAll('.item');
        var currentIndex = 0;
        var isScrolling = false;

        // 初始化位置
        items.forEach((item, index) => {
            item.style.transform = `translateY(${index * 100}%)`; // 初始位置
        });

        box.addEventListener('wheel', function (e) {
            // 允许正常滚动到边界
            if (currentIndex >= 2 && e.deltaY > 0 || currentIndex === 0 && e.deltaY < 0) {
                return; // 允许向下滚动到最后一项或向上滚动到第一项
            }

            e.preventDefault(); // 阻止默认滚动
            if (isScrolling) return; // 如果正在滚动，直接返回
            isScrolling = true; // 设置为正在滚动

            scrollCount = 0; // 重置计数

            if (e.deltaY > 0) {
                // 向下滚动
                currentIndex++;
            } else {
                // 向上滚动
                currentIndex--;
            }

            // 确保 currentIndex 不越界
            currentIndex = Math.max(0, Math.min(currentIndex, items.length - 1));

            // 更新每个item的位置和缩放效果
            items.forEach((item, index) => {
                if (index === currentIndex) {
                    item.style.transform = 'translateY(0) scale(1.2)'; // 当前item放大并居中
                } else {
                    item.style.transform = `translateY(${(index - currentIndex) * 100}%) scale(0.8)`; // 其他item缩小并上下移动
                }
            });

            // 设置一个定时器，允许在一段时间后恢复滚动
            setTimeout(() => {
                isScrolling = false; // 恢复为未滚动状态
            }, 500); // 可以根据需要调整时间
        });
    </script>

    <!-- 选项 1：jQuery 和 Bootstrap 集成包（集成了 Popper） -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>

</body>

</html>